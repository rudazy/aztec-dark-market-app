"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.SyncToAsyncAdapter = void 0;
/**
 * Adapter that wraps a synchronous backend to provide an async interface.
 * The sync backend's blocking calls are simply wrapped in Promise.resolve().
 *
 * This is useful for backends like shared memory where the call is actually
 * synchronous but we want to use it with the async API.
 */
class SyncToAsyncAdapter {
    constructor(syncBackend) {
        this.syncBackend = syncBackend;
    }
    async call(inputBuffer) {
        // The sync backend blocks until complete, so just wrap in a resolved promise
        return Promise.resolve(this.syncBackend.call(inputBuffer));
    }
    async destroy() {
        this.syncBackend.destroy();
    }
}
exports.SyncToAsyncAdapter = SyncToAsyncAdapter;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3luY190b19hc3luY19hZGFwdGVyLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vc3JjL2JiX2JhY2tlbmRzL3N5bmNfdG9fYXN5bmNfYWRhcHRlci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7QUFFQTs7Ozs7O0dBTUc7QUFDSCxNQUFhLGtCQUFrQjtJQUM3QixZQUFvQixXQUFnQztRQUFoQyxnQkFBVyxHQUFYLFdBQVcsQ0FBcUI7SUFBRyxDQUFDO0lBRXhELEtBQUssQ0FBQyxJQUFJLENBQUMsV0FBdUI7UUFDaEMsNkVBQTZFO1FBQzdFLE9BQU8sT0FBTyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDO0lBQzdELENBQUM7SUFFRCxLQUFLLENBQUMsT0FBTztRQUNYLElBQUksQ0FBQyxXQUFXLENBQUMsT0FBTyxFQUFFLENBQUM7SUFDN0IsQ0FBQztDQUNGO0FBWEQsZ0RBV0MifQ==