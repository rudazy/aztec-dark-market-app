import type { Hasher } from './hasher.js';
import { SiblingPath } from './sibling_path.js';
import { type TreeNodeLocation } from './unbalanced_tree_store.js';
export declare function computeCompressedUnbalancedMerkleTreeRoot(leaves: Buffer[], valueToCompress?: Buffer<ArrayBuffer>, hasher?: Hasher['hash']): Buffer;
/**
 * An ephemeral unbalanced Merkle tree implementation.
 * Follows the rollup implementation which greedily hashes pairs of nodes up the tree.
 * Remaining rightmost nodes are shifted up until they can be paired.
 * The values that match the `valueToCompress` are skipped and the sibling of the compressed leaf are shifted up until
 * they can be paired.
 * If there is only one leaf, the root is the leaf.
 */
export declare class UnbalancedMerkleTreeCalculator {
    private readonly leaves;
    private readonly valueToCompress;
    private readonly hasher;
    private store;
    private leafLocations;
    constructor(leaves: Buffer[], valueToCompress: Buffer, hasher: Hasher['hash']);
    static create(leaves: Buffer[], valueToCompress?: Buffer<ArrayBuffer>, hasher?: (left: Buffer, right: Buffer) => Buffer<ArrayBuffer>): UnbalancedMerkleTreeCalculator;
    /**
     * Returns the root of the tree.
     * @returns The root of the tree.
     */
    getRoot(): Buffer;
    /**
     * Returns a sibling path for the element.
     * @param value - The value of the element.
     * @returns A sibling path for the element.
     * Note: The sibling path is an array of sibling hashes, with the lowest hash (leaf hash) first, and the highest hash last.
     */
    getSiblingPath<N extends number>(value: Buffer): SiblingPath<N>;
    /**
     * Returns a sibling path for the leaf at the given index.
     * @param leafIndex - The index of the leaf.
     * @returns A sibling path for the leaf.
     */
    getSiblingPathByLeafIndex<N extends number>(leafIndex: number): SiblingPath<N>;
    getLeafLocation(leafIndex: number): TreeNodeLocation;
    /**
     * Adds leaves and nodes to the store. Updates the leafLocations.
     * @param leaves - The leaves of the tree.
     */
    private buildTree;
    private shiftNodeUp;
    private shiftChildrenUp;
}
//# sourceMappingURL=unbalanced_merkle_tree_calculator.d.ts.map